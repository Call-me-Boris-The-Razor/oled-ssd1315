/**
 * @file FontCyrillic5x7.hpp
 * @brief Кириллический шрифт 5x7 (А-Я, а-я, Ё, ё)
 * 
 * Шрифт совместим по размеру с базовым Font5x7.
 * Символы: А-Я (32 шт), а-я (32 шт), Ё, ё = 66 символов
 */

#ifndef OLED_FONT_CYRILLIC_5X7_HPP
#define OLED_FONT_CYRILLIC_5X7_HPP

#include <cstdint>

namespace oled {

// Кириллические заглавные буквы А-Я (Unicode U+0410 - U+042F)
// Каждый символ - 5 байт (колонки), биты снизу вверх
constexpr uint8_t FONT_CYRILLIC_UPPER[] = {
    // А (U+0410)
    0x7E, 0x11, 0x11, 0x11, 0x7E,
    // Б (U+0411)
    0x7F, 0x49, 0x49, 0x49, 0x71,
    // В (U+0412)
    0x7F, 0x49, 0x49, 0x49, 0x36,
    // Г (U+0413)
    0x7F, 0x01, 0x01, 0x01, 0x03,
    // Д (U+0414)
    0x60, 0x3E, 0x21, 0x3F, 0x60,
    // Е (U+0415)
    0x7F, 0x49, 0x49, 0x49, 0x41,
    // Ж (U+0416)
    0x63, 0x14, 0x7F, 0x14, 0x63,
    // З (U+0417)
    0x22, 0x41, 0x49, 0x49, 0x36,
    // И (U+0418)
    0x7F, 0x20, 0x10, 0x08, 0x7F,
    // Й (U+0419)
    0x7F, 0x20, 0x11, 0x08, 0x7F,
    // К (U+041A)
    0x7F, 0x08, 0x14, 0x22, 0x41,
    // Л (U+041B)
    0x40, 0x3E, 0x01, 0x01, 0x7F,
    // М (U+041C)
    0x7F, 0x02, 0x0C, 0x02, 0x7F,
    // Н (U+041D)
    0x7F, 0x08, 0x08, 0x08, 0x7F,
    // О (U+041E)
    0x3E, 0x41, 0x41, 0x41, 0x3E,
    // П (U+041F)
    0x7F, 0x01, 0x01, 0x01, 0x7F,
    // Р (U+0420)
    0x7F, 0x09, 0x09, 0x09, 0x06,
    // С (U+0421)
    0x3E, 0x41, 0x41, 0x41, 0x22,
    // Т (U+0422)
    0x01, 0x01, 0x7F, 0x01, 0x01,
    // У (U+0423)
    0x07, 0x48, 0x48, 0x48, 0x3F,
    // Ф (U+0424)
    0x0E, 0x11, 0x7F, 0x11, 0x0E,
    // Х (U+0425)
    0x63, 0x14, 0x08, 0x14, 0x63,
    // Ц (U+0426)
    0x7F, 0x40, 0x40, 0x7F, 0xC0,
    // Ч (U+0427)
    0x07, 0x08, 0x08, 0x08, 0x7F,
    // Ш (U+0428)
    0x7F, 0x40, 0x7F, 0x40, 0x7F,
    // Щ (U+0429)
    0x7F, 0x40, 0x7F, 0x40, 0xFF,
    // Ъ (U+042A)
    0x01, 0x7F, 0x48, 0x48, 0x30,
    // Ы (U+042B)
    0x7F, 0x48, 0x30, 0x00, 0x7F,
    // Ь (U+042C)
    0x7F, 0x48, 0x48, 0x48, 0x30,
    // Э (U+042D)
    0x22, 0x41, 0x49, 0x49, 0x3E,
    // Ю (U+042E)
    0x7F, 0x08, 0x3E, 0x41, 0x3E,
    // Я (U+042F)
    0x46, 0x29, 0x19, 0x09, 0x7F,
};

// Кириллические строчные буквы а-я (Unicode U+0430 - U+044F)
constexpr uint8_t FONT_CYRILLIC_LOWER[] = {
    // а (U+0430)
    0x20, 0x54, 0x54, 0x54, 0x78,
    // б (U+0431)
    0x3C, 0x4A, 0x4A, 0x4A, 0x31,
    // в (U+0432)
    0x7C, 0x54, 0x54, 0x54, 0x28,
    // г (U+0433)
    0x7C, 0x04, 0x04, 0x04, 0x0C,
    // д (U+0434)
    0x60, 0x38, 0x24, 0x3C, 0x60,
    // е (U+0435)
    0x38, 0x54, 0x54, 0x54, 0x18,
    // ж (U+0436)
    0x44, 0x28, 0x7C, 0x28, 0x44,
    // з (U+0437)
    0x28, 0x44, 0x54, 0x54, 0x28,
    // и (U+0438)
    0x7C, 0x20, 0x10, 0x08, 0x7C,
    // й (U+0439)
    0x7C, 0x21, 0x12, 0x09, 0x7C,
    // к (U+043A)
    0x7C, 0x10, 0x28, 0x44, 0x00,
    // л (U+043B)
    0x40, 0x38, 0x04, 0x04, 0x7C,
    // м (U+043C)
    0x7C, 0x08, 0x10, 0x08, 0x7C,
    // н (U+043D)
    0x7C, 0x10, 0x10, 0x10, 0x7C,
    // о (U+043E)
    0x38, 0x44, 0x44, 0x44, 0x38,
    // п (U+043F)
    0x7C, 0x04, 0x04, 0x04, 0x7C,
    // р (U+0440)
    0xFC, 0x24, 0x24, 0x24, 0x18,
    // с (U+0441)
    0x38, 0x44, 0x44, 0x44, 0x28,
    // т (U+0442)
    0x04, 0x04, 0x7C, 0x04, 0x04,
    // у (U+0443)
    0x0C, 0x50, 0x50, 0x50, 0x3C,
    // ф (U+0444)
    0x18, 0x24, 0xFE, 0x24, 0x18,
    // х (U+0445)
    0x44, 0x28, 0x10, 0x28, 0x44,
    // ц (U+0446)
    0x7C, 0x40, 0x40, 0x7C, 0xC0,
    // ч (U+0447)
    0x0C, 0x10, 0x10, 0x10, 0x7C,
    // ш (U+0448)
    0x7C, 0x40, 0x7C, 0x40, 0x7C,
    // щ (U+0449)
    0x7C, 0x40, 0x7C, 0x40, 0xFC,
    // ъ (U+044A)
    0x04, 0x7C, 0x50, 0x50, 0x20,
    // ы (U+044B)
    0x7C, 0x50, 0x20, 0x00, 0x7C,
    // ь (U+044C)
    0x7C, 0x50, 0x50, 0x50, 0x20,
    // э (U+044D)
    0x28, 0x44, 0x54, 0x54, 0x38,
    // ю (U+044E)
    0x7C, 0x10, 0x38, 0x44, 0x38,
    // я (U+044F)
    0x48, 0x34, 0x14, 0x14, 0x7C,
};

// Ё и ё отдельно (U+0401 и U+0451)
constexpr uint8_t FONT_CYRILLIC_YO_UPPER[] = {
    // Ё (U+0401)
    0x7F, 0x49, 0x49, 0x49, 0x41,
};

constexpr uint8_t FONT_CYRILLIC_YO_LOWER[] = {
    // ё (U+0451)
    0x38, 0x55, 0x54, 0x55, 0x18,
};

/**
 * @brief Получить глиф для кириллического символа
 * @param codepoint Unicode codepoint (U+0410-U+044F, U+0401, U+0451)
 * @return Указатель на 5-байтовый массив глифа или nullptr
 */
inline const uint8_t* getCyrillicGlyph(uint16_t codepoint) {
    // Ё
    if (codepoint == 0x0401) {
        return FONT_CYRILLIC_YO_UPPER;
    }
    // ё
    if (codepoint == 0x0451) {
        return FONT_CYRILLIC_YO_LOWER;
    }
    // А-Я (U+0410 - U+042F)
    if (codepoint >= 0x0410 && codepoint <= 0x042F) {
        return &FONT_CYRILLIC_UPPER[(codepoint - 0x0410) * 5];
    }
    // а-я (U+0430 - U+044F)
    if (codepoint >= 0x0430 && codepoint <= 0x044F) {
        return &FONT_CYRILLIC_LOWER[(codepoint - 0x0430) * 5];
    }
    return nullptr;
}

} // namespace oled

#endif // OLED_FONT_CYRILLIC_5X7_HPP
